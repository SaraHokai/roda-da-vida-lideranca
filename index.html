import React, { useState } from 'react';
import { Radar, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Tooltip } from 'recharts';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

const competencies = [
  'Visão Estratégica',
  'Comunicação e Influência',
  'Gestão Emocional e Resiliência',
  'Tomada de Decisão e Resolução de Problemas',
  'Inovação e Mentalidade de Crescimento',
  'Relacionamento e Trabalho em Equipe',
  'Ética e Responsabilidade Social',
  'Autoconhecimento e Desenvolvimento Pessoal',
];

const improvementTips = {
  'Visão Estratégica': 'Participe de workshops de planejamento estratégico e leia livros sobre liderança visionária.',
  'Comunicação e Influência': 'Faça cursos de oratória e pratique escuta ativa.',
  'Gestão Emocional e Resiliência': 'Considere técnicas de mindfulness e inteligência emocional.',
  'Tomada de Decisão e Resolução de Problemas': 'Estude metodologias como Design Thinking e análise de riscos.',
  'Inovação e Mentalidade de Crescimento': 'Explore cursos sobre inovação e mantenha-se atualizado com tendências do setor.',
  'Relacionamento e Trabalho em Equipe': 'Invista em dinâmicas de grupo e treinamentos de liderança colaborativa.',
  'Ética e Responsabilidade Social': 'Participe de seminários sobre ética corporativa e responsabilidade social.',
  'Autoconhecimento e Desenvolvimento Pessoal': 'Faça uso de ferramentas como MBTI, DISC e coaching pessoal.',
};

export default function LeadershipWheel() {
  const [scores, setScores] = useState(Array(competencies.length).fill(5));
  const [showChart, setShowChart] = useState(false);
  const [showFeedback, setShowFeedback] = useState(false);

  const handleChange = (index, value) => {
    const newScores = [...scores];
    newScores[index] = Number(value);
    setScores(newScores);
  };

  const data = competencies.map((name, index) => ({
    competency: name,
    score: scores[index],
  }));

  const generateFeedback = () => {
    return competencies.map((competency, index) => {
      const score = scores[index];
      let feedback = '';
      if (score <= 3) {
        feedback = 'Área crítica de desenvolvimento — Considere buscar mentoria ou treinamentos específicos.';
      } else if (score <= 6) {
        feedback = 'Área em progresso — Você está avançando, mas há espaço para crescer.';
      } else {
        feedback = 'Área fortalecida — Mantenha e aprofunde suas práticas.';
      }
      return { competency, feedback, tip: improvementTips[competency] };
    });
  };

  return (
    <div className="p-6 space-y-8">
      <h1 className="text-3xl font-bold text-center">Roda da Vida: Competências de Futuros Líderes</h1>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {competencies.map((competency, index) => (
          <Card key={index} className="shadow-lg">
            <CardContent className="p-4 space-y-2">
              <p className="font-medium">{competency}</p>
              <input
                type="range"
                min="0"
                max="10"
                value={scores[index]}
                onChange={(e) => handleChange(index, e.target.value)}
                className="w-full"
              />
              <p className="text-sm text-gray-600">Pontuação: {scores[index]}</p>
            </CardContent>
          </Card>
        ))}
      </div>

      <div className="text-center space-x-4">
        <Button onClick={() => setShowChart(true)}>Gerar Roda da Vida</Button>
        <Button onClick={() => setShowFeedback(true)}>Gerar Feedback</Button>
      </div>

      {showChart && (
        <div className="flex justify-center">
          <RadarChart outerRadius={150} width={500} height={500} data={data}>
            <PolarGrid />
            <PolarAngleAxis dataKey="competency" />
            <PolarRadiusAxis angle={30} domain={[0, 10]} />
            <Radar name="Pontuação" dataKey="score" stroke="#8884d8" fill="#8884d8" fillOpacity={0.6} />
            <Tooltip />
          </RadarChart>
        </div>
      )}

      {showFeedback && (
        <div className="space-y-4">
          <h2 className="text-2xl font-semibold text-center">Feedback Personalizado</h2>
          {generateFeedback().map((item, index) => (
            <Card key={index} className="shadow-md">
              <CardContent className="p-4">
                <p className="font-bold">{item.competency}</p>
                <p>{item.feedback}</p>
                <p className="text-sm text-gray-600 mt-2">Dica: {item.tip}</p>
              </CardContent>
            </Card>
          ))}
        </div>
      )}
    </div>
  );
}
